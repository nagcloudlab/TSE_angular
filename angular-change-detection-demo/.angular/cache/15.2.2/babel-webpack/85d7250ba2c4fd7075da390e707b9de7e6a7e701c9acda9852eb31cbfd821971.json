{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport class ZoneComponent {\n  constructor(zone) {\n    this.zone = zone;\n    this.count1 = 0;\n    this.count2 = 0;\n  }\n  // Async\n  handler1() {\n    this.count1 = 0;\n    this.increaseProgress1(() => console.log('Done!'));\n  }\n  increaseProgress1(doneCallback) {\n    this.count1 += 1;\n    console.log(`Current progress: ${this.count1}%`);\n    if (this.count1 < 100) {\n      // Async\n      window.setTimeout(() => {\n        this.increaseProgress1(doneCallback);\n      }, 100);\n    } else {\n      doneCallback();\n    }\n  }\n  handler2() {\n    this.count2 += 1;\n    this.zone.runOutsideAngular(() => {\n      this.increaseProgress2(() => {\n        this.zone.run(() => console.log('Outside Done!'));\n      });\n    });\n  }\n  increaseProgress2(doneCallback) {\n    this.count2 += 1;\n    console.log(`Current progress: ${this.count2}%`);\n    // if (this.count2 % 10 === 0) {\n    //   this.zone.run(() => { console.log('10%') })\n    // }\n    if (this.count2 < 100) {\n      window.setTimeout(() => {\n        this.increaseProgress2(doneCallback);\n      }, 100);\n    } else {\n      doneCallback();\n    }\n  }\n  ngOnInit() {}\n}\nZoneComponent.ɵfac = function ZoneComponent_Factory(t) {\n  return new (t || ZoneComponent)(i0.ɵɵdirectiveInject(i0.NgZone));\n};\nZoneComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ZoneComponent,\n  selectors: [[\"app-zone\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[1, \"btn\", \"btn-lg\", \"btn-dark\", 3, \"click\"]],\n  template: function ZoneComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function ZoneComponent_Template_button_click_0_listener() {\n        return ctx.handler1();\n      });\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"hr\");\n      i0.ɵɵelementStart(3, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function ZoneComponent_Template_button_click_3_listener() {\n        return ctx.handler2();\n      });\n      i0.ɵɵtext(4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" (in Zone) - \", ctx.count1, \"\\n\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" (out Zone) - \", ctx.count2, \"\\n\");\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";AAOA,OAAM,MAAOA,aAAa;EAMxBC,YAAoBC,IAAY;IAAZ,SAAI,GAAJA,IAAI;IAHxB,WAAM,GAAG,CAAC;IACV,WAAM,GAAG,CAAC;EAE0B;EAEpC;EACAC,QAAQ;IACN,IAAI,CAACC,MAAM,GAAG,CAAC;IACf,IAAI,CAACC,iBAAiB,CAAC,MAAMC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC,CAAC;EACpD;EAEAF,iBAAiB,CAACG,YAAwB;IACxC,IAAI,CAACJ,MAAM,IAAI,CAAC;IAChBE,OAAO,CAACC,GAAG,CAAC,qBAAqB,IAAI,CAACH,MAAM,GAAG,CAAC;IAChD,IAAI,IAAI,CAACA,MAAM,GAAG,GAAG,EAAE;MACrB;MACAK,MAAM,CAACC,UAAU,CAAC,MAAK;QACrB,IAAI,CAACL,iBAAiB,CAACG,YAAY,CAAC;MACtC,CAAC,EAAE,GAAG,CAAC;KAER,MAAM;MACLA,YAAY,EAAE;;EAElB;EAEAG,QAAQ;IACN,IAAI,CAACC,MAAM,IAAI,CAAC;IAChB,IAAI,CAACV,IAAI,CAACW,iBAAiB,CAAC,MAAK;MAE/B,IAAI,CAACC,iBAAiB,CAAC,MAAK;QAC1B,IAAI,CAACZ,IAAI,CAACa,GAAG,CAAC,MAAMT,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAAC;MACnD,CAAC,CAAC;IAEJ,CAAC,CAAC;EACJ;EAEAO,iBAAiB,CAACN,YAAwB;IACxC,IAAI,CAACI,MAAM,IAAI,CAAC;IAChBN,OAAO,CAACC,GAAG,CAAC,qBAAqB,IAAI,CAACK,MAAM,GAAG,CAAC;IAChD;IACA;IACA;IACA,IAAI,IAAI,CAACA,MAAM,GAAG,GAAG,EAAE;MACrBH,MAAM,CAACC,UAAU,CAAC,MAAK;QACrB,IAAI,CAACI,iBAAiB,CAACN,YAAY,CAAC;MACtC,CAAC,EAAE,GAAG,CAAC;KACR,MAAM;MACLA,YAAY,EAAE;;EAElB;EAKAQ,QAAQ,IACR;;;mBA1DWhB,aAAa;AAAA;;QAAbA,aAAa;EAAAiB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCL1BC,iCAAyD;MAAjDA;QAAA,OAASC,cAAU;MAAA,EAAC;MACxBD,YACJ;MAAAA,iBAAS;MAGTA,qBAAK;MAILA,iCAAyD;MAAjDA;QAAA,OAASC,cAAU;MAAA,EAAC;MACxBD,YACJ;MAAAA,iBAAS;;;MAVLA,eACJ;MADIA,wDACJ;MAQIA,eACJ;MADIA,yDACJ","names":["ZoneComponent","constructor","zone","handler1","count1","increaseProgress1","console","log","doneCallback","window","setTimeout","handler2","count2","runOutsideAngular","increaseProgress2","run","ngOnInit","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/nag/Desktop/ng-advanced/angular-runtime-performance/src/app/zone/zone.component.ts","/Users/nag/Desktop/ng-advanced/angular-runtime-performance/src/app/zone/zone.component.html"],"sourcesContent":["import { Component, NgZone, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-zone',\n  templateUrl: './zone.component.html',\n  styleUrls: ['./zone.component.css']\n})\nexport class ZoneComponent implements OnInit {\n\n\n  count1 = 0;\n  count2 = 0;\n\n  constructor(private zone: NgZone) { }\n\n  // Async\n  handler1() {\n    this.count1 = 0;\n    this.increaseProgress1(() => console.log('Done!'));\n  }\n\n  increaseProgress1(doneCallback: () => void) {\n    this.count1 += 1;\n    console.log(`Current progress: ${this.count1}%`);\n    if (this.count1 < 100) {\n      // Async\n      window.setTimeout(() => {\n        this.increaseProgress1(doneCallback);\n      }, 100);\n\n    } else {\n      doneCallback();\n    }\n  }\n\n  handler2() {\n    this.count2 += 1;\n    this.zone.runOutsideAngular(() => {\n\n      this.increaseProgress2(() => {\n        this.zone.run(() => console.log('Outside Done!'))\n      });\n\n    });\n  }\n\n  increaseProgress2(doneCallback: () => void) {\n    this.count2 += 1;\n    console.log(`Current progress: ${this.count2}%`);\n    // if (this.count2 % 10 === 0) {\n    //   this.zone.run(() => { console.log('10%') })\n    // }\n    if (this.count2 < 100) {\n      window.setTimeout(() => {\n        this.increaseProgress2(doneCallback);\n      }, 100);\n    } else {\n      doneCallback();\n    }\n  }\n\n\n\n\n  ngOnInit(): void {\n  }\n\n}\n","\n\n<button (click)=\"handler1()\" class=\"btn btn-lg btn-dark\">\n    (in Zone) - {{count1}}\n</button>\n\n\n<hr/>\n\n\n\n<button (click)=\"handler2()\" class=\"btn btn-lg btn-dark\">\n    (out Zone) - {{count2}}\n</button>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}